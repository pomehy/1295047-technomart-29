const mapLink=document.querySelector(".contacts__map"),mapModal=document.querySelector(".map-modal"),mapModalClose=document.querySelector(".map-modal--close"),writeUsLink=document.querySelector(".contacts__link"),writeUsModal=document.querySelector(".write-us"),writeUsClose=document.querySelector(".write-us--close"),userName=document.querySelector("[name=write-us-name]"),userEmail=document.querySelector("[name=write-us-email]"),userText=document.querySelector("[name=write-us-text]"),writeUsForm=document.querySelector(".write-us__form"),storageUserName=localStorage.getItem("user-name"),isStorageSupport=!0;let storage="",promoSliderItems=document.querySelectorAll(".slider__item"),sliderControls=document.querySelector(".slider__controls"),promoSliderToggles=document.querySelectorAll(".slider__toggle"),sliderButton=document.querySelector(".slider__button"),promoSliderButtonPrev=document.querySelector(".slider__button--prev"),promoSliderButtonNext=document.querySelector(".slider__button--next"),serviceSliderItems=document.querySelectorAll(".service-slider__item"),serviceSliderButtons=document.querySelectorAll(".service-slider__button"),serviceSliderItem=document.querySelectorAll(".service-slider__item"),serviceSliderNav=document.querySelector(".service-slider__nav"),cart=document.querySelector(".cart"),addCartButtons=document.querySelectorAll(".button-add-cart"),modalMessageAddCart=document.querySelector(".message-add-cart"),messageAddCartClose=document.querySelector(".message-add-cart--close"),messageAddCartContinue=document.querySelector(".message-add-cart__continue"),cartValue=document.querySelector(".cart__value"),cartValueCounter=cartValue.textContent,addBookmarsButtons=document.querySelectorAll(".button-add-bookmarks"),modalMessageAddBookmars=document.querySelector(".message-add-bookmarks"),messageAddBookmarksClose=document.querySelector(".message-add-bookmarks--close"),messageAddBookmarksContinue=document.querySelector(".message-add-bookmarks__continue"),bookmarksValue=document.querySelector(".bookmarks__value"),bookmarksValueCounter=bookmarksValue.textContent,loginButton=document.querySelector(".autorization__login"),autorization=document.querySelector(".autorization"),logoutButton=document.querySelector(".user__logout");if(loginButton.addEventListener("click",function(e){e.preventDefault(),autorization.classList.add("autorization--active")}),logoutButton.addEventListener("click",function(e){e.preventDefault(),autorization.classList.remove("autorization--active")}),addBookmarsButtons)for(let e of addBookmarsButtons)e.addEventListener("click",function(e){e.preventDefault(),modalMessageAddBookmars.classList.add("modal-show"),bookmarksValueCounter++,bookmarksValue.textContent=bookmarksValueCounter}),messageAddBookmarksClose.addEventListener("click",function(e){e.preventDefault(),modalMessageAddBookmars.classList.remove("modal-show")}),messageAddBookmarksContinue.addEventListener("click",function(e){e.preventDefault(),modalMessageAddBookmars.classList.remove("modal-show")});if(addCartButtons)for(let e of addCartButtons)e.addEventListener("click",function(e){e.preventDefault(),modalMessageAddCart.classList.add("modal-show"),cartValueCounter++,cartValue.textContent=cartValueCounter,cart.classList.add("cart--active")}),messageAddCartClose.addEventListener("click",function(e){e.preventDefault(),modalMessageAddCart.classList.remove("modal-show")}),messageAddCartContinue.addEventListener("click",function(e){e.preventDefault(),modalMessageAddCart.classList.remove("modal-show")});mapLink&&(mapLink.addEventListener("click",function(e){e.preventDefault(),mapModal.classList.add("modal-show")}),mapModalClose.addEventListener("click",function(e){e.preventDefault(),mapModal.classList.remove("modal-show")}));try{storage=localStorage.getItem("user-name")}catch(e){isStorageSupport=!1}if(writeUsLink&&(writeUsLink.addEventListener("click",function(e){e.preventDefault(),writeUsModal.classList.add("modal-show"),storageUserName?(userName.value=storageUserName,userEmail.focus()):userName.focus()}),writeUsClose.addEventListener("click",function(e){e.preventDefault(),writeUsModal.classList.remove("modal-show"),writeUsModal.classList.remove("modal-error")}),writeUsForm.addEventListener("submit",function(e){userName.value&&userEmail.value&&userText.value?isStorageSupport&&localStorage.setItem("user-name",userName.value):(e.preventDefault(),writeUsModal.classList.remove("modal-error"),writeUsModal.offsetWidth=writeUsModal.offsetWidth,writeUsModal.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(mapModal.classList.contains("modal-show")?(e.preventDefault(),mapModal.classList.remove("modal-show")):writeUsModal.classList.contains("modal-show")&&(e.preventDefault(),writeUsModal.classList.remove("modal-show"),writeUsModal.classList.remove("modal-error")))})),serviceSliderNav&&serviceSliderNav.addEventListener("click",function(e){if(e.target.classList.contains("service-slider__button")){e.preventDefault();let t=Array.from(serviceSliderButtons),o=e.target,r=t.indexOf(o);t.forEach(function(e,t,o){t===r?(e.classList.add("service-slider__button--active"),serviceSliderItems[t].classList.add("service-slider__item--active")):(e.classList.remove("service-slider__button--active"),serviceSliderItems[t].classList.remove("service-slider__item--active"))})}}),sliderControls){sliderControls.addEventListener("click",function(e){let t=Array.from(promoSliderToggles),o=e.target;currentSlide(t.indexOf(o)+1)});let e=2;function currentSlide(t){showSlides(e=t),addActiveClass(e)}function addActiveClass(t){let o=document.getElementsByClassName("slider__toggle");for(let e of o)e.classList.remove("slider__toggle--active");o[e-1].classList.add("slider__toggle--active")}function showSlides(t){t>promoSliderItems.length&&(e=1),t<1&&(e=promoSliderItems.length);for(let e of promoSliderItems)e.classList.remove("slider__item--active");promoSliderItems[e-1].classList.add("slider__item--active")}showSlides(e),promoSliderButtonNext.addEventListener("click",function(){showSlides(e+=1),addActiveClass(e)}),promoSliderButtonPrev.addEventListener("click",function(){showSlides(e-=1),addActiveClass(e)}),currentSlide(e)}
